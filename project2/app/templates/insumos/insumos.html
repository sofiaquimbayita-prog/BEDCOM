{% extends "includes/base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="{% static 'ap1/css/insumos.css' %}" />

<main class="main-container">
    <div class="btn-agregar-container">
        <button class="btn-agregar" id="btn-agregar-insumo">
            <i class="fas fa-plus"></i> Agregar Insumo
        </button>
    </div>

    <table id="tablaInsumos" class="display">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Categoría</th>
                <th>Cantidad</th>
                <th>Unidad</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
    </table>
</main>

<div class="modal" id="modal-insumo">
    <div class="modal-contenido">
        <div class="modal-header">
            <h3 class="modal-titulo" id="modal-titulo">Agregar Insumo</h3>
            <button class="btn-cerrar" id="btn-cerrar-modal">&times;</button>
        </div>

        <form method="post" id="form-insumo">
            {% csrf_token %}
            <div class="form-grupo">
                <label>Nombre</label>
                <input type="text" name="nombre" id="in_nombre" class="form-input" required>
            </div>
            <div class="form-grupo">
                <label>Cantidad</label>
                <input type="number" name="cantidad" id="in_cantidad" class="form-input" required>
            </div>
            <div class="form-grupo">
                <label>Unidad de Medida</label>
                <input type="text" name="unidad_medida" id="in_unidad" class="form-input" required>
            </div>
            <div class="form-grupo">
                <label>Categoría</label>
                <select name="id_categoria" id="in_categoria" class="form-select" required>
                    {% for c in categorias %}
                        <option value="{{ c.id }}">{{ c.nombre }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-grupo">
                <label>Estado</label>
                <select name="estado" id="in_estado" class="form-select">
                    <option value="Activo">Activo</option>
                    <option value="Inactivo">Inactivo</option>
                </select>
            </div>
            <div class="form-botones">
                <button type="button" class="btn-cancelar" id="btn-cancelar">Cancelar</button>
                <button type="submit" class="btn-guardar">Guardar</button>
            </div>
        </form>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script>
    // Constantes para el JS externo
    const INSUMOS_DATA_URL = "{% url 'insumos_data' %}";
</script>
<script src="{% static 'ap1/js/insumos.js' %}"></script>
{% endblock %}